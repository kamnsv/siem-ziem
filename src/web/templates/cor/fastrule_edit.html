{% extends 'base.html' %}

{% block content %}
<div class="row d-flex justify-content-center">
<div class="col-10 m-3">
<form 
  method="POST" 
  class="post-form"
  id="form"
>
{{ form.csrf_token }}
  <div class="row">
    <div class="col-7 fs-4 mb-5">
      Редактирование простого правила корреляции
    </div>
  </div>
  <div class="row">
    <div class="col-2 fs-4 mb-5">
      <button 
        type="submit" 
        class="save btn btn-primary shadow border-0 form-control">
        Сохранить
      </button>
    </div>
    <div class="col-2 fs-4 mb-5">
      <a 
        class="btn btn-light shadow border-0 form-control" 
        href="{{ url_for('cor.fastrule', obj=obj) }}"
      >
        Отмена
      </a>
    </div>
  </div>
  <div class="row g-5">
    <div class="col-8">
      <div 
        class="card border-light shadow-sm p-3 mb-5 bg-body rounded">
        <div class="card-body">
          <h5 class="card-title">
            Основная информация
          </h5>
          <h6 
            class="card-subtitle mb-2 text-muted">Описание правила
          </h6>
          <div class="row g-2 mt-2">
            <div class="form-floating ">
              {{ form.name }}
              <label>{{ form.name.label }}</label>
            </div>
          </div>
          <div class="row g-2 mt-2">
            <div class="form-floating">
              {{ form.desc }}
              <label>{{ form.desc.label }}</label>
              {% if diff[form.desc.name] %}
              <span 
                class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"
                data-toggle="tooltip" 
                title="{{ diff[form.desc.name] }}"
                >
              </span>
              {% endif %}                  
            </div>
          </div>
          <div class="row g-2 mt-2">
            <div class="form-floating">
              {{ form.clas }}
              <label>{{ form.clas.label }}</label>
              {% if diff[form.clas.name] %}
              <span 
                class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"
                data-toggle="tooltip" 
                title="{{ diff[form.clas.name] }}"
                >
              </span>
              {% endif %}                  
            </div>
          </div>              
          <div class="row g-2 mt-2">
            <h6 
              class="card-subtitle my-2 text-muted">К какому объекту относится и критичность
            </h6>
            <div class="col-6">
              <div class="form-floating ">
                {{ form.obj }}
                <label>{{ form.obj.label }}</label>
              </div>
            </div>      
            <div class="col-6">
              <div class="form-floating">
                {{ form.crit }}
                <label>{{ form.crit.label }}</label>
                {% if diff[form.crit.name] %}
                <span 
                  class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"
                  data-toggle="tooltip" 
                  title="{{ diff[form.crit.name] }}"
                  >
                </span>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="row">
        <div 
          class="card border-light shadow-sm p-3 mb-5 bg-body rounded">
          <div class="card-body">
            <h5 class="card-title">
              Таксономия
            </h5>
            <h6 
              class="card-subtitle mb-2 text-muted">Событие  образующее инцидент
            </h6>
            <div class="row g-2 mt-2">
              <div class="form-floating">
                {{ form.tax_main }}
                <label for="floatingTaxmain">{{ form.tax_main.label }}</label>
                {% if diff[form.tax_main.name] %}
                <span 
                  class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"
                  data-toggle="tooltip" 
                  title="{{ diff[form.tax_main.name] }}"
                  >
                </span>
                {% endif %}                    
              </div>
            </div>
            <div class="row g-2 mt-2">
              <div class="form-floating">
                {{ form.tax_object }}
                <label for="floatingTaxobject">{{ form.tax_object.label }}</label>
                {% if diff[form.tax_object.name] %}
                <span 
                  class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"
                  data-toggle="tooltip" 
                  title="{{ diff[form.tax_object.name] }}"
                  >
                </span>
                {% endif %}                    
              </div>
            </div>
            <div class="row g-2 mt-2">
              <div class="form-floating">
                {{ form.tax_action }}
                <label for="floatingTaxaction">{{ form.tax_action.label }}</label>
                {% if diff[form.tax_action.name] %}
                <span 
                  class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"
                  data-toggle="tooltip" 
                  title="{{ diff[form.tax_action.name] }}"
                  >
                </span>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</form>
</div>  
</div>
{% endblock %}
