![logo](/static/images/logo.png)

### _Руководство администратора_  

![](https://img.shields.io/badge/version-3.1-blue)
![](https://img.shields.io/badge/python-3.9-blue)
![](https://img.shields.io/badge/astra-1.6-red)

> Данное руководство содержит необходимую информацию по установке и настройке системы  

##### Содержание  

[Информация](#info)  
    [Минимальные системные требования](#tth)  
    [Зависимости](#dep)  
[Установка](#inst)  
    [Обновление](#update)  
    [Инициализация](#init)  
    [Запуск](#run)  

<a name=info>
## Информация 
</a>

* 3IEM работает под системами ОС `Astra Linux` или `Debian 11`.  
* Разработан на скриптовом языке `Python3`.  
* Распространяется в виде образа `виртуальной машины`, а также в виде `дистрибутива`.

<a name=tth>
### Минимальные системные требования
</a>

* пропускная способность канала: 64 кбит/сек  
* свободно место на диске: 500 Гб

<a name=dep>
### Зависимости
</a>

* MongoDB
* Python == 3.9

<a name=inst>
## Установка
</a>

```sh
cd /opt
sudo git clone [zime]
cd ziem
sudo python3 install.py
sudo ziem --init
sudo reboot now
```

> В результате установки `sudo python3 install.py` создаётся ярлык в `/usr/bin/ziem`

<a name=update>
### Обновление
</a>

```sh
cd /opt/zime
sudo git pull
sudo python3 install.py
sudo reboot now
```

> Мажорные версии 3IEM являются обратно совместимыми.
    
<a name=init>
### Инициализация
</a>

`sudo ziem --init`

* Создается дополнительный пользователь `zuser`, от которого работает ZIEM  
* Создаются сервисы:
    - `zimecored` ядро опроса активов.
    - `zimewebd` web-сервер настройки.
    - `zimepostd` сервис отправки.
* Создаются каталоги для работы ZIEM:
    - /etc/opt/ziem - конфигурационные файлов, `root` запись, `zuser` чтение  
    - /var/opt/ziem - временные файлов, `zuser` запись  
    - /var/log/ziem - логи, `zuser` запись   


<hr>

<a name=run>
### Запуск
</a>

```sh
└─$ ziem                                                                                                            
ZIEM 3.1

███████╗██╗███████╗███╗   ███╗
╚══███╔╝██║██╔════╝████╗ ████║
  ███╔╝ ██║█████╗  ██╔████╔██║
 ███╔╝  ██║██╔══╝  ██║╚██╔╝██║
███████╗██║███████╗██║ ╚═╝ ██║
╚══════╝╚═╝╚══════╝╚═╝     ╚═╝

usage: ziem [options]

optional arguments:
  -h, --help     Вызов данной справки
  -c, --core     Запуск CORE. Сбор, нормализация, корреляция событий.
  -w, --web      Запуск WEB. Работа в DEBUG режиме, только для проверки!
  -p, --post     Запуск POST. Отправка логов, отчет о работе ZIEM
  --confinstall  Установка конфигурации из WEB в CORE.
  --debug        Запуск в DEBUG режиме.
  --init         Инициализация конфигурации системы
  --dropdb       Очистка базы CORE. Удаление всех сообщений, событий, инцидентов.
  --clearweb     Очистка базы WEB. Удаление источников и правил.
  --dropweb      Очистка базы WEB. Удаление всех настроек.
  --dropuser     Сброс пароля пользователю admin для входа в WEB.
  -v, --version  Просмотр версии программы.
```

